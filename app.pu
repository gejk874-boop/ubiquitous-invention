import os
import asyncio
from hydrogram import Client

API_ID = 2040
API_HASH = "b18441a1ff607e10a989891a5462e627"
BOT_TOKEN = "8223288154:AAEGGJGOXzIAUNRocxzKL7x-IAUhVfEb-xw"

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥
from main import app, init_db

# –°–æ–∑–¥–∞–µ–º –ø—Ä–æ—Å—Ç–æ–π HTTP —Å–µ—Ä–≤–µ—Ä –¥–ª—è Bothost
from flask import Flask
web_app = Flask(__name__)

@web_app.route('/')
def home():
    return "Bot is running!"

@web_app.route('/health')
def health():
    return "OK"

# –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞ –≤ —Ñ–æ–Ω–µ
async def run_bot():
    init_db()
    await app.start()
    print("ü§ñ Bot started on Bothost!")
    # –ù–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –±–æ—Ç–∞

# –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
loop = asyncio.new_event_loop()
asyncio.set_event_loop(loop)
loop.create_task(run_bot())

# Bothost –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ
application = web_app
